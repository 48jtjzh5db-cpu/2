<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>å­¸ç¿’å‹‡è€…æˆé•·éŠæˆ²</title>

<style>
    body {
        margin: 0;
        font-family: "Noto Sans TC", "Arial Rounded MT Bold", sans-serif;
        background: linear-gradient(180deg, #e3f2fd, #fffde7);
        text-align: center;
        color: #333;
    }

    h1 {
        margin-top: 20px;
        font-size: 32px;
    }

    .name-box {
        font-size: 24px;
        margin: 10px;
    }

    .name-box input {
        font-size: 24px;
        padding: 6px 12px;
        border-radius: 12px;
        border: 2px solid #90caf9;
        text-align: center;
    }

    .title {
        font-size: 26px;
        margin: 15px;
        font-weight: bold;
        color: #ff7043;
    }

    .container {
        display: flex;
        flex-direction: column;
        gap: 20px;
        padding: 20px;
    }

    .skill {
        background: #ffffff;
        border-radius: 24px;
        padding: 20px;
        box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }

    .skill h2 {
        font-size: 28px;
        margin-bottom: 10px;
    }

    .level {
        font-size: 26px;
        font-weight: bold;
        margin-bottom: 10px;
    }

    .progress-bar {
        width: 100%;
        height: 30px;
        background: #eeeeee;
        border-radius: 20px;
        overflow: hidden;
        margin-bottom: 15px;
    }

    .progress {
        height: 100%;
        width: 0%;
        background: linear-gradient(90deg, #81c784, #4caf50);
        transition: width 0.3s;
    }

    .btn {
        font-size: 26px;
        padding: 16px;
        width: 100%;
        border-radius: 20px;
        border: none;
        background: #64b5f6;
        color: white;
        cursor: pointer;
    }

    .btn:active {
        transform: scale(0.97);
    }

    .reset {
        margin: 20px;
        font-size: 18px;
        background: #ef9a9a;
        color: white;
        border: none;
        border-radius: 12px;
        padding: 10px 20px;
        cursor: pointer;
    }

    canvas {
        position: fixed;
        top: 0;
        left: 0;
        pointer-events: none;
        z-index: 999;
    }
</style>
</head>

<body>

<h1>ğŸ® å­¸ç¿’å‹‡è€…æˆé•·éŠæˆ²</h1>

<div class="name-box">
    å‹‡è€…å§“åï¼š
    <input id="heroName" />
</div>

<div class="title" id="heroTitle"></div>

<div class="container">
    <div class="skill">
        <h2>ğŸ“– åœ‹èªï¼šæ–‡å­—é­”æ³•</h2>
        <div class="level">Lv. <span id="lv-chinese"></span></div>
        <div class="progress-bar">
            <div class="progress" id="exp-chinese"></div>
        </div>
        <button class="btn" onclick="gainExp('chinese')">å®Œæˆç·´ç¿’</button>
    </div>

    <div class="skill">
        <h2>ğŸ§  æ•¸å­¸ï¼šé‚è¼¯èƒ½é‡</h2>
        <div class="level">Lv. <span id="lv-math"></span></div>
        <div class="progress-bar">
            <div class="progress" id="exp-math"></div>
        </div>
        <button class="btn" onclick="gainExp('math')">å®Œæˆç·´ç¿’</button>
    </div>

    <div class="skill">
        <h2>ğŸ—£ï¸ è‹±æ–‡ï¼šæ™‚ç©ºèªéŸ³</h2>
        <div class="level">Lv. <span id="lv-english"></span></div>
        <div class="progress-bar">
            <div class="progress" id="exp-english"></div>
        </div>
        <button class="btn" onclick="gainExp('english')">å®Œæˆç·´ç¿’</button>
    </div>
</div>

<button class="reset" onclick="resetData()">é‡è¨­è³‡æ–™</button>

<canvas id="confetti"></canvas>

<script>
const skills = ['chinese', 'math', 'english'];
const canvas = document.getElementById("confetti");
const ctx = canvas.getContext("2d");
let confettiPieces = [];

function init() {
    skills.forEach(skill => {
        if (!localStorage.getItem(skill)) {
            localStorage.setItem(skill, JSON.stringify({ lv: 1, exp: 0 }));
        }
    });

    document.getElementById("heroName").value =
        localStorage.getItem("heroName") || "å°å‹‡è€…";

    updateUI();
}

function gainExp(skill) {
    let data = JSON.parse(localStorage.getItem(skill));
    data.exp += 10;

    if (data.exp >= 100) {
        data.exp = 0;
        data.lv += 1;
        launchConfetti();
    }

    localStorage.setItem(skill, JSON.stringify(data));
    updateUI();
}

function updateUI() {
    let totalLv = 0;

    skills.forEach(skill => {
        let data = JSON.parse(localStorage.getItem(skill));
        document.getElementById(`lv-${skill}`).innerText = data.lv;
        document.getElementById(`exp-${skill}`).style.width = data.exp + "%";
        totalLv += data.lv;
    });

    document.getElementById("heroTitle").innerText = getTitle(totalLv);
}

function getTitle(lv) {
    if (lv <= 3) return "è¦‹ç¿’å°å‹‡è€…";
    if (lv <= 6) return "çŸ¥è­˜å†’éšªå®¶";
    if (lv <= 9) return "é‚è¼¯é­”æ³•å¸«";
    return "å‚³èªªç´šå¤§è³¢è€…";
}

document.getElementById("heroName").addEventListener("input", e => {
    localStorage.setItem("heroName", e.target.value);
});

function resetData() {
    if (confirm("ç¢ºå®šè¦é‡è¨­æ‰€æœ‰è³‡æ–™å—ï¼Ÿ")) {
        localStorage.clear();
        location.reload();
    }
}

/* ğŸ‰ Confetti */
function launchConfetti() {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    confettiPieces = [];

    for (let i = 0; i < 150; i++) {
        confettiPieces.push({
            x: Math.random() * canvas.width,
            y: Math.random() * canvas.height - canvas.height,
            r: Math.random() * 6 + 4,
            d: Math.random() * 20,
            color: `hsl(${Math.random() * 360}, 80%, 60%)`,
            tilt: Math.random() * 10
        });
    }

    let frame = 0;
    function draw() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        confettiPieces.forEach(p => {
            ctx.beginPath();
            ctx.fillStyle = p.color;
            ctx.fillRect(p.x, p.y, p.r, p.r);
            p.y += Math.cos(p.d) + 3;
            p.x += Math.sin(p.d);
        });
        frame++;
        if (frame < 120) requestAnimationFrame(draw);
    }
    draw();
}

init();
</script>

</body>
</html>
